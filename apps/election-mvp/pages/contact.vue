<template>
  <div class="min-h-screen bg-gray-50">
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">
          Contactez-nous
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Notre √©quipe est √† votre √©coute pour r√©pondre √† vos questions 
          et vous accompagner dans votre projet de communication politique
        </p>
      </div>

      <!-- Contact Methods Quick Access -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <Card class="text-center p-6 hover:shadow-lg transition-shadow">
          <div class="text-blue-600 text-3xl mb-4">üìû</div>
          <h3 class="font-semibold mb-2">Appelez-nous</h3>
          <p class="text-gray-600 text-sm mb-3">R√©ponse imm√©diate</p>
          <a href="tel:+22507XXXXXX" class="text-blue-600 font-medium">+225 07 XX XX XX XX</a>
        </Card>
        
        <Card class="text-center p-6 hover:shadow-lg transition-shadow">
          <div class="text-green-600 text-3xl mb-4">üí¨</div>
          <h3 class="font-semibold mb-2">WhatsApp</h3>
          <p class="text-gray-600 text-sm mb-3">Discussion rapide</p>
          <a href="https://wa.me/22507XXXXXX" class="text-green-600 font-medium" target="_blank">Discuter maintenant</a>
        </Card>
        
        <Card class="text-center p-6 hover:shadow-lg transition-shadow">
          <div class="text-red-600 text-3xl mb-4">üö®</div>
          <h3 class="font-semibold mb-2">Urgence</h3>
          <p class="text-gray-600 text-sm mb-3">Commande express</p>
          <a href="tel:+22507XXXXXX" class="text-red-600 font-medium">+225 07 XX XX XX XX</a>
        </Card>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <!-- Formulaire de contact principal -->
        <div class="lg:col-span-2">
          <ContactForm @submitted="onFormSubmitted" />
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
          <!-- Coordonn√©es -->
          <Card>
            <template #header>
              <h2 class="text-xl font-semibold">Nos coordonn√©es</h2>
            </template>
            
            <div class="space-y-4">
              <div class="flex items-start space-x-3">
                <div class="text-blue-600 text-xl">üìç</div>
                <div>
                  <h3 class="font-medium">Adresse</h3>
                  <p class="text-gray-600">
                    Zone 4, Rue K55<br>
                    Marcory - Abidjan<br>
                    C√¥te d'Ivoire
                  </p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="text-blue-600 text-xl">üìû</div>
                <div>
                  <h3 class="font-medium">T√©l√©phone</h3>
                  <p class="text-gray-600">+225 07 XX XX XX XX</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="text-blue-600 text-xl">‚úâÔ∏è</div>
                <div>
                  <h3 class="font-medium">Email</h3>
                  <p class="text-gray-600">contact@ns2po.ci</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="text-blue-600 text-xl">üïí</div>
                <div>
                  <h3 class="font-medium">Horaires</h3>
                  <p class="text-gray-600">
                    Lundi - Vendredi: 8h - 17h<br>
                    Samedi: 8h - 12h<br>
                    Dimanche: Ferm√©
                  </p>
                </div>
              </div>
            </div>
          </Card>

          <!-- Services -->
          <Card variant="primary">
            <template #header>
              <h2 class="text-xl font-semibold text-white">Nos garanties</h2>
            </template>
            
            <div class="space-y-3">
              <div class="flex items-center space-x-2">
                <span class="text-white">‚úì</span>
                <span class="text-white">Devis gratuit sous 24h</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-white">‚úì</span>
                <span class="text-white">Conception graphique incluse</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-white">‚úì</span>
                <span class="text-white">Livraison dans toute la CI</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-white">‚úì</span>
                <span class="text-white">Support technique d√©di√©</span>
              </div>
              <div class="flex items-center space-x-2">
                <span class="text-white">‚úì</span>
                <span class="text-white">Produits certifi√©s qualit√©</span>
              </div>
            </div>
          </Card>

          <!-- FAQ rapide -->
          <Card>
            <template #header>
              <h2 class="text-xl font-semibold">FAQ Express</h2>
            </template>
            
            <div class="space-y-4">
              <div>
                <h3 class="font-medium text-gray-900">‚è±Ô∏è D√©lais de livraison ?</h3>
                <p class="text-sm text-gray-600">7 √† 14 jours ouvr√©s selon quantit√©</p>
              </div>
              
              <div>
                <h3 class="font-medium text-gray-900">üì¶ Quantit√© minimum ?</h3>
                <p class="text-sm text-gray-600">25 √† 50 pi√®ces selon le produit</p>
              </div>
              
              <div>
                <h3 class="font-medium text-gray-900">üé® Formats accept√©s ?</h3>
                <p class="text-sm text-gray-600">PNG, JPG, SVG, AI, EPS HD</p>
              </div>
              
              <div>
                <h3 class="font-medium text-gray-900">üí∞ Mode de paiement ?</h3>
                <p class="text-sm text-gray-600">Mobile Money, Virement, Esp√®ces</p>
              </div>
            </div>
          </Card>

          <!-- Testimonials -->
          <Card>
            <template #header>
              <h2 class="text-xl font-semibold">Ils nous font confiance</h2>
            </template>
            
            <div class="space-y-4">
              <div class="border-l-4 border-blue-500 pl-4">
                <p class="text-sm text-gray-600 italic">"Service impeccable, d√©lais respect√©s!"</p>
                <p class="text-xs text-gray-500 mt-1">- Parti D√©mocratique, Abidjan</p>
              </div>
              
              <div class="border-l-4 border-green-500 pl-4">
                <p class="text-sm text-gray-600 italic">"Qualit√© exceptionnelle, prix comp√©titifs"</p>
                <p class="text-xs text-gray-500 mt-1">- Alliance Politique, Bouak√©</p>
              </div>
              
              <div class="border-l-4 border-orange-500 pl-4">
                <p class="text-sm text-gray-600 italic">"√âquipe professionnelle et r√©active"</p>
                <p class="text-xs text-gray-500 mt-1">- Candidat Ind√©pendant, San Pedro</p>
              </div>
            </div>
          </Card>

          <!-- Partners -->
          <Card>
            <template #header>
              <h2 class="text-xl font-semibold">Nos partenaires</h2>
            </template>
            
            <div class="grid grid-cols-2 gap-4 text-center">
              <div class="p-4 bg-gray-50 rounded">
                <div class="text-2xl mb-2">üè¢</div>
                <p class="text-xs text-gray-600">Imprimerie Moderne</p>
              </div>
              <div class="p-4 bg-gray-50 rounded">
                <div class="text-2xl mb-2">üöö</div>
                <p class="text-xs text-gray-600">Livraison Express</p>
              </div>
              <div class="p-4 bg-gray-50 rounded">
                <div class="text-2xl mb-2">‚úÖ</div>
                <p class="text-xs text-gray-600">Certification ISO</p>
              </div>
              <div class="p-4 bg-gray-50 rounded">
                <div class="text-2xl mb-2">üé®</div>
                <p class="text-xs text-gray-600">Studio Cr√©atif</p>
              </div>
            </div>
          </Card>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { Card } from '@ns2po/ui'
import ContactForm from '../components/ContactForm.vue'
import type { ContactSubmissionResponse } from '@ns2po/types'

useHead({
  title: 'Contact - NS2PO √âlections',
  meta: [
    {
      name: 'description',
      content: 'Contactez NS2PO pour vos projets de gadgets personnalis√©s pour campagnes √©lectorales en C√¥te d\'Ivoire. Devis gratuit sous 24h.'
    },
    {
      name: 'keywords',
      content: 'contact NS2PO, devis gratuit, gadgets personnalis√©s, √©lections C√¥te d\'Ivoire, objets publicitaires'
    }
  ]
})

// Success toast notification
const { $toast } = useNuxtApp() as { $toast?: { success: Function; error: Function } }

// Handle form submission success
const onFormSubmitted = (response: ContactSubmissionResponse) => {
  try {
    if (response.success) {
      // Show success message
      const message = response.message || 'Votre message a √©t√© envoy√© avec succ√®s!'
      
      // Show toast notification if available, otherwise use alert
      if ($toast && typeof $toast.success === 'function') {
        $toast.success(message)
      } else {
        alert(message)
      }

      // Log for analytics
      console.log('Contact form submitted successfully:', {
        contactId: response.contactId,
        timestamp: new Date().toISOString()
      })

      // Scroll to top to show success message
      window.scrollTo({ top: 0, behavior: 'smooth' })
    } else {
      throw new Error('Erreur lors de l\'envoi')
    }
  } catch (error) {
    console.error('Error handling form submission:', error)
    
    // Show error message
    const errorMessage = 'Erreur lors de l\'envoi du message. Veuillez r√©essayer.'
    if ($toast && typeof $toast.error === 'function') {
      $toast.error(errorMessage)
    } else {
      alert(errorMessage)
    }
  }
}
</script>